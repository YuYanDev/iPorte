(this.webpackJsonpwebui=this.webpackJsonpwebui||[]).push([[0],{197:function(e,a,t){e.exports=t.p+"static/media/language.ac8e88d6.svg"},204:function(e,a,t){e.exports=t(437)},213:function(e,a,t){},395:function(e,a,t){},437:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),i=t(41),l=t(4),d=t.n(l),r=(t(213),t(84)),c=t(102),p={zh_CN:{now:"zh_CN","common.text.modify":"\u4fee\u6539","common.text.drop":"\u5220\u9664","common.text.stop":"\u6682\u505c","common.text.add":"\u6dfb\u52a0","common.text.edit":"\u4fee\u6539","common.text.submit":"\u63d0\u4ea4","common.text.confirm":"\u786e\u8ba4","common.text.cancel":"\u53d6\u6d88","common.nav.menu.application":"\u5e94\u7528\u5217\u8868","common.nav.menu.setting":"\u8bbe\u7f6e","application.body.add_domain":"\u6dfb\u52a0\u57df\u540d","application.table.head.domain_id":"\u57df\u540dID","application.table.head.name":"\u540d\u79f0","application.table.head.domain":"\u57df\u540d","application.table.head.rule_count":"\u89c4\u5219\u6570\u91cf","application.table.head.rule_id":"\u89c4\u5219ID","application.table.head.rule_name":"\u89c4\u5219\u540d\u79f0","application.table.head.suffix":"\u540e\u7f00","application.table.head.status":"\u72b6\u6001","application.table.head.type":"\u7c7b\u578b","application.table.head.rewrite":"\u76ee\u5f55\u91cd\u5199","application.table.head.target":"\u8f6c\u53d1\u5730\u5740","application.table.head.domain_operate":"\u57df\u540d\u64cd\u4f5c","application.table.head.rule_operate":"\u89c4\u5219\u64cd\u4f5c","application.table.add_rule":"\u6dfb\u52a0\u89c4\u5219","application.common.domain":"\u57df\u540d","application.common.rule":"\u8f6c\u53d1\u89c4\u5219","application.common.stop_domain":"\u786e\u5b9a\u505c\u7528\u6b64\u57df\u540d\u5417\uff1f","application.common.stop_rule":"\u786e\u5b9a\u505c\u7528\u6b64\u8f6c\u53d1\u89c4\u5219\u5417\uff1f","application.common.drop_domain":"\u786e\u5b9a\u5220\u9664\u6b64\u57df\u540d\u5417\uff1f","application.common.drop_rule":"\u786e\u5b9a\u5220\u9664\u6b64\u8f6c\u53d1\u89c4\u5219\u5417\uff1f"},en_US:{now:"en_US","common.text.modify":"Modify","common.text.drop":"Delete","common.text.stop":"Stop","common.text.add":"Add","common.text.edit":"Edit","common.text.submit":"Submit","common.text.confirm":"Confirm","common.text.cancel":"Cancel","common.nav.menu.application":"Applications","common.nav.menu.setting":"Setting","application.body.add_domain":"Add Domain","application.table.head.domain_id":"Domain ID","application.table.head.name":"Name","application.table.head.domain":"Domain","application.table.head.rule_count":"Rule Count","application.table.head.rule_id":"Rule ID","application.table.head.rule_name":"Rule Name","application.table.head.suffix":"Suffix","application.table.head.status":"Status","application.table.head.type":"Type","application.table.head.rewrite":"Rewrite","application.table.head.target":"Target","application.table.head.domain_operate":"Domain Operate","application.table.head.rule_operate":"Rule Operate","application.table.add_rule":"Add Rule","application.common.domain":"Domain","application.common.rule":"Rule","application.common.stop_domain":"Are you sure stop this domain?","application.common.stop_rule":"Are you sure stop this rule?","application.common.drop_domain":"Are you sure delete this domain?","application.common.drop_rule":"Are you sure delete this rule?"}},m={navbarkey:"application",lang:p[null!==localStorage.getItem("user_lang")?localStorage.getItem("user_lang"):"en_US"]},s=function(e,a){return Object(r.a)({},e,{navbarkey:a.navbarkey})},u=function(e,a){return Object(r.a)({},e,{lang:p[a.lang]})},h=Object(c.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_NAVBAR_KEY":return s(e,a);case"SET_LANG":return u(e,a);default:return e}})),y=(t(440),t(61)),b=(t(216),t(5)),f=t(72),E=t.n(f),g=t(38),M=t(39),A=t(49),k=t(48),x=t(50),v=(t(219),t(62)),O=t(201),D=t(53),C=t(107),w=t.n(C);w.a.defaults.headers["Content-Type"]="application/x-www-form-urlencoded",w.a.defaults.timeout=1e4;var _=new(function(){function e(){Object(g.a)(this,e),this.queue={}}return Object(M.a)(e,[{key:"destroy",value:function(e){delete this.queue[e]}},{key:"interceptors",value:function(e,a){var t=this;e.interceptors.response.use((function(e){var n=e.data,o=void 0===n?{}:n;if(t.destroy(a),console.log(o.code),200!==o.code){401===o.code&&(window.location.href="/auth/login");var i=o.message;i||(i="\u6570\u636e\u83b7\u53d6\u5f02\u5e38")}return o}),(function(e){return console.error({content:"\u670d\u52a1\u5668\u5f02\u5e38"}),Promise.reject(e)}))}},{key:"request",value:function(e){var a=w.a.create();return this.interceptors(a),e=Object.assign({},e),this.queue[e.url]=a,a(e)}}]),e}()),S=(t(237),t(86)),R=(t(112),t(18)),I=(t(240),t(145)),T=(t(438),t(144)),j=function(e){function a(){var e,t;Object(g.a)(this,a);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(t=Object(A.a)(this,(e=Object(k.a)(a)).call.apply(e,[this].concat(i)))).statusHashMap={Stop:"error",Running:"success"},t.state={applicationList:[],addAndEditDomainModalVisible:!1,addAndEditDomainModalType:"add",addAndEditDomainModalId:null,addAndEditDomainModalData:{},addAndEditRuleModalVisible:!1,addAndEditRuleModalType:"add",addAndEditRuleModalId:null,addAndEditRuleModalData:{},stopModalVisible:!1,stopModalType:"domain",stopModalTypeId:null,stopModalTypeName:"",dropModalVisible:!1,dropModalType:"domain",dropModalTypeId:null,dropModalTypeName:""},t.handleAddAndEditDomainModalOpen=function(e,a,n){"edit"===e?t.setState({addAndEditDomainModalVisible:!0,addAndEditDomainModalType:"edit",addAndEditDomainModalId:a,addAndEditDomainModalData:n}):t.setState({addAndEditDomainModalVisible:!0,addAndEditDomainModalType:"add",addAndEditDomainModalId:null,addAndEditDomainModalData:{}})},t.handleAddAndEditDomainModalOk=function(){t.handleAddAndEditDomainModalCancel()},t.handleAddAndEditDomainModalCancel=function(){t.setState({addAndEditDomainModalVisible:!1,addAndEditDomainModalType:"add",addAndEditDomainModalId:null,addAndEditDomainModalData:{}})},t.handleAddAndEditRuleModalOpen=function(e,a,n){"edit"===e?t.setState({addAndEditRuleModalVisible:!0,addAndEditRuleModalType:"edit",addAndEditRuleModalId:a,addAndEditRuleModalData:n}):t.setState({addAndEditRuleModalVisible:!0,addAndEditRuleModalType:"add",addAndEditRuleModalId:null,addAndEditRuleModalData:{}})},t.handleAddAndEditRuleModalOk=function(){t.handleAddAndEditRuleModalCancel()},t.handleAddAndEditRuleModalCancel=function(){t.setState({addAndEditRuleModalVisible:!1,addAndEditRuleModalType:"add",addAndEditRuleModalId:null,addAndEditRuleModalData:{}})},t.handleStopModalOpen=function(e,a,n){t.setState({stopModalVisible:!0,stopModalType:e,stopModalTypeId:a,stopModalTypeName:n})},t.handleStopModalOk=function(){t.handleStopModalCancel()},t.handleStopModalCancel=function(){t.setState({stopModalVisible:!1,stopModalType:"domain",stopModalTypeId:null,stopModalTypeName:""})},t.handleDropModalOpen=function(e,a,n){t.setState({dropModalVisible:!0,dropModalType:e,dropModalTypeId:a,dropModalTypeName:n})},t.handleDropModalOk=function(){t.handleDropModalCancel()},t.handleDropModalCancel=function(){t.setState({dropModalVisible:!1,dropModalType:"domain",dropModalTypeId:null,dropModalTypeName:""})},t.domainChildTable=function(e){return o.a.createElement(T.a,{columns:t.getForwardListColumns(),dataSource:e.rule,pagination:!1})},t}return Object(x.a)(a,e),Object(M.a)(a,[{key:"getDomainListColumns",value:function(){var e=this,a=this.props.lang;return[{title:a["application.table.head.domain_id"],dataIndex:"id",key:"id",width:100},{title:a["application.table.head.name"],dataIndex:"name",key:"name",width:150},{title:a["application.table.head.domain"],dataIndex:"domain",key:"domain",width:200},{title:a["application.table.head.rule_count"],key:"rule",render:function(e,a){return o.a.createElement("span",null,a.rule.length)}},{title:a["application.table.head.status"],key:"status",dataIndex:"status",width:150,render:function(a,t){return o.a.createElement("span",null,o.a.createElement(I.a,{status:e.statusHashMap[a]}),a)}},{title:a["application.table.head.domain_operate"],key:"action",width:240,align:"right",render:function(t,n){return o.a.createElement("span",null,o.a.createElement("a",{onClick:function(){return e.handleAddAndEditRuleModalOpen("add")}},a["application.table.add_rule"])," | ",o.a.createElement("a",{className:"warn-text",onClick:function(){return e.handleAddAndEditDomainModalOpen("edit",n.id,n)}},a["common.text.modify"])," | ",o.a.createElement("a",{className:"warn-text",onClick:function(){return e.handleStopModalOpen("domain",n.id,n.name)}},a["common.text.stop"])," | ",o.a.createElement("a",{className:"error-text",onClick:function(){return e.handleDropModalOpen("domain",n.id,n.name)}},a["common.text.drop"]))}}]}},{key:"getForwardListColumns",value:function(){var e=this,a=this.props.lang;return[{title:a["application.table.head.rule_id"],dataIndex:"id",key:"id",width:100},{title:a["application.table.head.rule_name"],dataIndex:"name",key:"name",width:150},{title:a["application.table.head.suffix"],dataIndex:"suffix",key:"suffix",width:200},{title:a["application.table.head.type"],dataIndex:"type",key:"type"},{title:a["application.table.head.rewrite"],key:"rewrite",render:function(e,a){return a.rewrite?a.rewrite_rule:"-"}},{title:a["application.table.head.target"],key:"target",dataIndex:"target"},{title:a["application.table.head.status"],key:"status",dataIndex:"status",width:150,render:function(a,t){return o.a.createElement("span",null,o.a.createElement(I.a,{status:e.statusHashMap[a]}),a)}},{title:a["application.table.head.rule_operate"],key:"action",width:240,align:"right",render:function(t,n){return o.a.createElement("span",null,o.a.createElement("a",{className:"warn-text",onClick:function(){return e.handleAddAndEditRuleModalOpen("edit",n.id,n)}},a["common.text.modify"])," | ",o.a.createElement("a",{className:"warn-text",onClick:function(){return e.handleStopModalOpen("rule",n.id,n.name)}},a["common.text.stop"])," | ",o.a.createElement("a",{className:"error-text",onClick:function(){return e.handleDropModalOpen("rule",n.id,n.name)}},a["common.text.drop"]))}}]}},{key:"fetchApplicationList",value:function(){var e;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap((t=void 0,_.request({url:"/api/application/list",params:t,method:"get"})));case 2:e=a.sent,this.setState({applicationList:e.data.applications});case 4:case"end":return a.stop()}var t}),null,this)}},{key:"componentDidMount",value:function(){this.fetchApplicationList()}},{key:"render",value:function(){var e=this,a=this.props.lang;return o.a.createElement("div",null,o.a.createElement("div",{style:{textAlign:"left",paddingBottom:16}},o.a.createElement("h1",null,a["common.nav.menu.application"]),o.a.createElement(R.a,{type:"primary",icon:"plus",onClick:function(){return e.handleAddAndEditDomainModalOpen("add")}},a["application.body.add_domain"])),o.a.createElement(T.a,{columns:this.getDomainListColumns(),expandedRowRender:this.domainChildTable,dataSource:this.state.applicationList}),o.a.createElement(S.a,{visible:this.state.addAndEditDomainModalVisible,onOk:this.handleAddAndEditDomainModalOk,onCancel:this.handleAddAndEditDomainModalCancel,title:("add"===this.state.addAndEditDomainModalType?a["common.text.add"]:a["common.text.edit"])+a["application.common.domain"],footer:[o.a.createElement(R.a,{key:"back",onClick:this.handleAddAndEditDomainModalCancel},a["common.text.cancel"]),o.a.createElement(R.a,{key:"submit",type:"primary",onClick:this.handleAddAndEditDomainModalOk},a["common.text.submit"])]}),o.a.createElement(S.a,{visible:this.state.addAndEditRuleModalVisible,onOk:this.handleAddAndEditRuleModalOk,onCancel:this.handleAddAndEditRuleModalCancel,title:("add"===this.state.addAndEditRuleModalType?a["common.text.add"]:a["common.text.edit"])+a["application.common.rule"],footer:[o.a.createElement(R.a,{key:"back",onClick:this.handleAddAndEditRuleModalCancel},a["common.text.cancel"]),o.a.createElement(R.a,{key:"submit",type:"primary",onClick:this.handleAddAndEditRuleModalOk},a["common.text.submit"])]}),o.a.createElement(S.a,{visible:this.state.stopModalVisible,onOk:this.handleStopModalOk,onCancel:this.handleStopModalCancel,footer:[o.a.createElement(R.a,{key:"back",onClick:this.handleStopModalCancel},a["common.text.cancel"]),o.a.createElement(R.a,{key:"submit",type:"danger",ghost:!0,onClick:this.handleStopModalOk,style:{borderColor:"#faad14",color:"#faad14"}},a["common.text.confirm"])]},"domain"===this.state.stopModalType?a["application.common.stop_domain"]:a["application.common.stop_rule"]),o.a.createElement(S.a,{visible:this.state.dropModalVisible,onOk:this.handleDropModalOk,onCancel:this.handleDropModalCancel,footer:[o.a.createElement(R.a,{key:"back",onClick:this.handleDropModalCancel},a["common.text.cancel"]),o.a.createElement(R.a,{key:"submit",type:"danger",ghost:!0,onClick:this.handleDropModalOk,style:{borderColor:"#f5222d",color:"#f5222d"}},a["common.text.confirm"])]},"domain"===this.state.dropModalType?a["application.common.drop_domain"]:a["application.common.drop_rule"]))}}]),a}(o.a.Component),N=Object(i.b)((function(e){return{lang:e.lang}}))(j),L=(t(439),t(109)),V=(t(155),t(51)),q=t(197),z=t.n(q),H=(t(395),V.a.Option),B=function(e){function a(){var e,t;Object(g.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=Object(A.a)(this,(e=Object(k.a)(a)).call.apply(e,[this].concat(o)))).languageList=[{value:"zh_CN",text:"\u7b80\u4f53\u4e2d\u6587"},{value:"en_US",text:"English"}],t.formItemLayout={labelCol:{span:1}},t.changeLanguage=function(e){localStorage.setItem("user_lang",e),t.props.setLang(e)},t}return Object(x.a)(a,e),Object(M.a)(a,[{key:"render",value:function(){var e=this.languageList.map((function(e){return o.a.createElement(H,{key:e.value},e.text)}));return o.a.createElement(L.a,this.formItemLayout,o.a.createElement(L.a.Item,{label:o.a.createElement("img",{src:z.a,alt:"language"}),style:{textAlign:"left"}},o.a.createElement(V.a,{defaultValue:this.props.lang.now,style:{width:120},onChange:this.changeLanguage},e)))}}]),a}(o.a.Component),F=L.a.create({name:"setting"})(Object(i.b)((function(e){return{lang:e.lang}}),(function(e){return{setLang:function(a){return e({type:"SET_LANG",lang:a})}}}))(B)),P=function(e){function a(){return Object(g.a)(this,a),Object(A.a)(this,Object(k.a)(a).apply(this,arguments))}return Object(x.a)(a,e),Object(M.a)(a,[{key:"render",value:function(){var e=this.props.lang;return o.a.createElement("div",null,o.a.createElement("div",{style:{textAlign:"left",paddingBottom:16}},o.a.createElement("h1",null,e["common.nav.menu.setting"])),o.a.createElement("div",null,o.a.createElement(F,null)))}}]),a}(o.a.Component),U=Object(i.b)((function(e){return{lang:e.lang}}))(P),G=v.a.Header,J=v.a.Content,K=v.a.Footer,Y=v.a.Sider,W=function(e){function a(){var e,t;Object(g.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=Object(A.a)(this,(e=Object(k.a)(a)).call.apply(e,[this].concat(o)))).yearNow=(new Date).getFullYear(),t.state={username:""},t.switchRouter=function(e){window.location.hash="/"+e.key},t}return Object(x.a)(a,e),Object(M.a)(a,[{key:"componentDidMount",value:function(){var e;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap((t=void 0,_.request({url:"/api/sys/user-info",params:t,method:"get"})));case 2:e=a.sent,this.setState(Object(r.a)({},e));case 4:case"end":return a.stop()}var t}),null,this)}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(v.a,null,o.a.createElement(Y,{style:{overflow:"auto",height:"100vh",position:"fixed",left:0,zIndex:100}},o.a.createElement("div",{className:"logo"}),o.a.createElement(y.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[this.props.navbarkey],onClick:this.switchRouter},o.a.createElement("div",{style:{height:36}},o.a.createElement("p",{style:{marginTop:36,fontSize:"200%",textAlign:"center"}},"IPorte")),o.a.createElement(y.a.Item,{key:"application"},o.a.createElement(b.a,{type:"unordered-list"}),o.a.createElement("span",{className:"nav-text"},this.props.lang["common.nav.menu.application"])),o.a.createElement(y.a.Item,{key:"setting"},o.a.createElement(b.a,{type:"setting"}),o.a.createElement("span",{className:"nav-text"},this.props.lang["common.nav.menu.setting"])))),o.a.createElement(v.a,{style:{marginLeft:200,minWidth:"1200px"}},o.a.createElement(G,{style:{background:"#fff",padding:0}},o.a.createElement("p",{style:{textAlign:"right",marginRight:"20px"}},"Hi, ",this.state.username)),o.a.createElement(J,{style:{margin:"24px 16px 0",overflow:"initial"}},o.a.createElement("div",{style:{padding:24,background:"#fff",textAlign:"center"}},o.a.createElement(O.a,null,o.a.createElement(D.a,{from:"/",to:"/application"}),o.a.createElement(D.b,{path:"/application",component:N}),o.a.createElement(D.b,{path:"/setting",component:U})))),o.a.createElement(K,{style:{textAlign:"center"}},"\xa9",this.yearNow," IPorte API Gateway"))))}}]),a}(o.a.Component),Q=Object(i.b)((function(e){return{lang:e.lang,navbarkey:e.navbarkey}}))(W);d.a.render(o.a.createElement(i.a,{store:h},o.a.createElement(Q,null)),document.getElementById("root"))}},[[204,1,2]]]);
//# sourceMappingURL=main.f0e1cc18.chunk.js.map